{"version":3,"sources":["BusDisplayTable.js","index.js"],"names":["BusDisplayTable","buses","length","map","bus","index","key","trip_id","stop_id","departure_time","uqStops","App","state","this","getBuses","stopId","fetch","then","res","json","tripPromises","trips","i","concat","getBusesForStop","Promise","all","values","forEach","value","setState","className","React","Component","ReactDOM","render","document","getElementById"],"mappings":"kNA6BeA,G,MA3BS,SAAC,GAAa,IAAZC,EAAW,EAAXA,MACtB,OACI,+BACI,+BACI,4BACI,uCACA,uCACA,gDAGR,+BAESA,EAAMC,OAAS,EAAKD,EAAME,KAAI,SAACC,EAAKC,GACjC,OACI,wBAAIC,IAAOD,GACP,4BAAKD,EAAIG,SACT,4BAAKH,EAAII,SACT,4BAAKJ,EAAIK,oBAGhB,4BAAI,+CCZvBC,EAAU,CAAC,OAAQ,OAAQ,QAE3BC,E,2MAEJC,MAAQ,CACNX,MAAO,I,mFAOPY,KAAKC,a,sCAGSC,GACd,OAAOC,MAAM,8CAAgDD,EAAS,KACnEE,MAAK,SAAAC,GAAG,OAAIA,EAAIC,Y,iCAOnB,IAJU,IAAD,OACLC,EAAe,GACfC,EAAQ,GAEHC,EAAI,EAAGA,EAAIZ,EAAQR,OAAQoB,IAClCF,EAAeA,EAAaG,OAAOV,KAAKW,gBAAgBd,EAAQY,KAGlEG,QAAQC,IAAIN,GAAcH,MAAK,SAAAU,GAC7BA,EAAOC,SAAQ,SAAAC,GAAK,OAAIR,EAAQA,EAAME,OAAOM,MAC7C,EAAKC,SAAS,CAAC7B,MAAOoB,S,+BAKxB,OACA,yBAAKU,UAAU,YACb,kBAAC,EAAD,CAAiB9B,MAASY,KAAKD,MAAMX,a,GAnCzB+B,IAAMC,WAyCxBC,IAASC,OACP,kBAAC,EAAD,MACAC,SAASC,eAAe,U","file":"static/js/main.c56249cd.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst BusDisplayTable = ({buses}) => {\r\n    return (\r\n        <table>\r\n            <thead>\r\n                <tr>\r\n                    <th>trip_id</th>\r\n                    <th>stop_id</th>\r\n                    <th>departure_time</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody>\r\n                {\r\n                    (buses.length > 0) ? buses.map((bus, index) => {\r\n                        return (\r\n                            <tr key = {index}>\r\n                                <td>{bus.trip_id}</td>\r\n                                <td>{bus.stop_id}</td>\r\n                                <td>{bus.departure_time}</td>\r\n                            </tr>\r\n                        )\r\n                    }) : <tr><td>Loading...</td></tr> \r\n                }\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n\r\nexport default BusDisplayTable;","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport BusDisplayTable from './BusDisplayTable.js';\r\n\r\n//Gets bus details from 'trips' table using a trip_id\r\n//trip_id is one of the next 'x' busses departing from uq (stop_times)\r\n//Gets further bus details from 'routes' table using a route_id found in\r\n//'trips'\r\n\r\nconst uqStops = [\"1853\", \"1878\", \"1880\"];//, \"1880\", \"1882\", \"1883\"];\r\n\r\nclass App extends React.Component {\r\n\r\n  state = {\r\n    buses: []\r\n  }\r\n\r\n  //var today = Date();\r\n  //var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();\r\n\r\n  componentDidMount() {\r\n    this.getBuses();\r\n  }\r\n\r\n  getBusesForStop(stopId) {\r\n    return fetch(\"http://uqbus.richal.tech/stop_time/stop_id/\" + stopId + \"/\")\r\n      .then(res => res.json());\r\n  }\r\n\r\n  getBuses() {\r\n    var tripPromises = [];\r\n    var trips = [];\r\n\r\n    for (var i = 0; i < uqStops.length; i++) {\r\n      tripPromises = tripPromises.concat(this.getBusesForStop(uqStops[i]));\r\n    }\r\n\r\n    Promise.all(tripPromises).then(values => {\r\n      values.forEach(value => trips = trips.concat(value));\r\n      this.setState({buses: trips});\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n    <div className=\"BusTable\">\r\n      <BusDisplayTable buses = {this.state.buses}/>\r\n    </div>\r\n    );\r\n  }\r\n}\r\n\r\nReactDOM.render(\r\n  <App></App>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}